(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{133:function(e,t,a){e.exports=a(164)},138:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),i=a.n(c),l=a(24),o=a(52),u="https://ruvodtest.herokuapp.com",m=(a(138),a(10)),s=a(41),d=a(18),b=a(166),v=a(214),f=a(59),E=a(106),j=a(216),p=a(210),O=a(5),g=a(26),h=a(168),w=a(204),C=a(200),y=a(74),x=a.n(y),k=a(73),I=a.n(k),S=a(203),z=a(111),q=a.n(z),R=a(110),A=a.n(R),U=a(202),$=Object(E.a)("div")({display:"flex",marginLeft:"46px",marginTop:"8px"}),F=function(e){var t=e.name,a=e.email,c=e.deleteItem,i=e.showCard,l=e.showMoreInfo,o=e.setStore;return Object(n.useEffect)((function(){setTimeout((function(){return o({showCard:!0})}),100)}),[]),r.a.createElement(C.a,{in:i},r.a.createElement(h.a,null,r.a.createElement(j.a,{p:2},r.a.createElement(U.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,alignItems:"center",direction:"row"},r.a.createElement(j.a,{mr:2},r.a.createElement(S.a,{size:"small",onClick:function(){return o({showMoreInfo:!l})}},l?r.a.createElement(I.a,null):r.a.createElement(x.a,null))),r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(U.a,{item:!0},"Name:"),r.a.createElement(U.a,{item:!0},t))))),r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,direction:"row",spacing:2},r.a.createElement(U.a,{item:!0},r.a.createElement(S.a,{size:"small",onClick:function(){o({edit:!0})}},r.a.createElement(A.a,{fontSize:"small"}))),r.a.createElement(U.a,{item:!0},r.a.createElement(S.a,{size:"small",onClick:function(){o({showCard:!1}),c()}},r.a.createElement(q.a,{fontSize:"small"})))))),r.a.createElement(w.a,{in:l},r.a.createElement($,null,r.a.createElement(U.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(U.a,{item:!0},"User email:"),r.a.createElement(U.a,{item:!0},a)))))))},W=a(40),P=a(215),L=a(76),T=a.n(L),N=a(64),H=a.n(N),B=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,D=function(e){return B.test(e)},M=Object(E.a)("div")({display:"flex",marginLeft:"46px",marginTop:"10px"}),Q=Object(E.a)(P.a)((function(e){var t=e.theme,a=e.smallScreenWidth;return Object(W.a)({},t.breakpoints.down("xs"),{width:a})})),J=function(e){var t=e.name,a=e.email,c=e.showMoreInfo,i=e.showCard,l=e.setStore,o=e.updateItem,u=Object(n.useState)(t),s=Object(m.a)(u,2),d=s[0],b=s[1],v=Object(n.useState)(a),f=Object(m.a)(v,2),E=f[0],p=f[1],g=Object(n.useState)({}),y=Object(m.a)(g,2),k=y[0],z=k.name,q=k.email,R=y[1];return r.a.createElement(C.a,{in:i},r.a.createElement(h.a,null,r.a.createElement(j.a,{p:2},r.a.createElement(U.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,alignItems:"center"},r.a.createElement(j.a,{mr:2},r.a.createElement(S.a,{size:"small",onClick:function(){return l({showMoreInfo:!c})}},c?r.a.createElement(I.a,null):r.a.createElement(x.a,null))),r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(U.a,{item:!0},"Name:"),r.a.createElement(U.a,{item:!0},r.a.createElement(Q,{smallScreenWidth:"90px",value:d,onChange:function(e){var t=e.target.value;b(t),R((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:null})}))},error:null===z||void 0===z?void 0:z.error})))))),r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,direction:"row",spacing:2},r.a.createElement(U.a,{item:!0},r.a.createElement(S.a,{size:"small",onClick:function(){l({edit:!1})}},r.a.createElement(H.a,{fontSize:"small"}))),r.a.createElement(U.a,{item:!0},r.a.createElement(S.a,{size:"small",onClick:function(){(function(){var e;return d||(e=!0,R((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:{label:"Required",error:!0}})}))),D(E)||(e=!0,R((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e})()&&(l({name:d,email:E,edit:!1}),o({name:d,email:E}))}},r.a.createElement(T.a,{fontSize:"small"})))))),r.a.createElement(w.a,{in:c},r.a.createElement(M,null,r.a.createElement(U.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(U.a,{item:!0},"User email:"),r.a.createElement(U.a,{item:!0},r.a.createElement(Q,{smallScreenWidth:"140px",value:E,onChange:function(e){var t=e.target.value;p(t),R((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:null})}))},error:null===q||void 0===q?void 0:q.error}))))))))},Z=function(e){var t=e.deleteItem,a=e.updateItem,c=Object(g.a)(e,["deleteItem","updateItem"]),i=Object(n.useState)(Object(O.a)({},c)),l=Object(m.a)(i,2),o=l[0],u=l[1],s=o.edit,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(Object(O.a)(Object(O.a)({},o),e))};return r.a.createElement(r.a.Fragment,null,s?r.a.createElement(J,Object.assign({},o,{setStore:d,updateItem:a})):r.a.createElement(F,Object.assign({},o,{setStore:d,deleteItem:t})))},_=a(207),G=function(e){var t=e.opacity,a=void 0===t?1:t;return r.a.createElement(h.a,{style:{opacity:a}},r.a.createElement(j.a,{p:2},r.a.createElement(U.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,alignItems:"center",direction:"row"},r.a.createElement(j.a,{mr:4}),r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(U.a,{item:!0},r.a.createElement(_.a,{variant:"text",height:30,width:45})),r.a.createElement(U.a,{item:!0},r.a.createElement(_.a,{variant:"text",height:30,width:145})))))),r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,direction:"row",spacing:2},r.a.createElement(U.a,{item:!0},r.a.createElement(_.a,{variant:"text",height:30,width:18})),r.a.createElement(U.a,{item:!0},r.a.createElement(_.a,{variant:"text",height:30,width:18})))))))},Y=a(208),K=function(e){var t=e.loading,a=e.users,n=void 0===a?[]:a,c=e.deleteItem,i=e.updateItem;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(U.a,{container:!0,spacing:3},Array(6).fill(null).map((function(e,t){return r.a.createElement(U.a,{item:!0,xs:12,key:t},r.a.createElement(G,{opacity:1-1.5*t/10}))}))):r.a.createElement(r.a.Fragment,null,n.length?r.a.createElement(U.a,{container:!0,spacing:3},n.map((function(e){return r.a.createElement(U.a,{item:!0,xs:12,key:e.id},r.a.createElement(Z,Object.assign({},e,{deleteItem:function(){return c(e.id)},updateItem:function(t){return i(e.id,t)}})))}))):r.a.createElement(Y.a,null,"Users list is empty")))},V=a(116),X=a.n(V),ee=a(209),te=a(66);function ae(){var e=Object(te.a)(["\n  mutation updateUser($id: ID!, $user: UpdateUserInput!) {\n    updateUser(id: $id, input: $user) {\n      id\n      email\n      name\n    }\n  }\n"]);return ae=function(){return e},e}function ne(){var e=Object(te.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id) {\n      id\n      email\n      name\n    }\n  }\n"]);return ne=function(){return e},e}function re(){var e=Object(te.a)(["\n  query getUsers($skip: Int, $limit: Int) {\n    users(skip: $skip, limit: $limit) {\n      id\n      email\n      name\n    }\n  }\n"]);return re=function(){return e},e}function ce(){var e=Object(te.a)(["\n  mutation createUser($user: CreateUserInput!) {\n    createUser(input: $user) {\n      id\n      email\n      name\n    }\n  }\n"]);return ce=function(){return e},e}var ie=Object(o.b)(ce()),le={limit:100},oe=Object(o.b)(re()),ue=Object(o.b)(ne()),me=Object(o.b)(ae()),se=Object(E.a)("div")({display:"flex",marginLeft:"16px",marginTop:"10px"}),de=Object(E.a)("div")({position:"fixed",bottom:"15vh",right:"20vw"}),be=Object(E.a)(P.a)((function(e){var t=e.theme,a=e.smallScreenWidth;return Object(W.a)({},t.breakpoints.down("xs"),{width:a})})),ve={name:"",email:""},fe=function(e){var t=e.defaultShow,a=Object(n.useState)(t),c=Object(m.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)(ve),u=Object(m.a)(o,2),s=u[0],d=u[1],b=s.name,v=s.email,E=Object(f.a)(ie,{update:function(e,t){var a=t.data.createUser,n=e.readQuery({query:oe,variables:le}).users;e.writeQuery({query:oe,data:{users:n.concat(a)},variables:le})}}),p=Object(m.a)(E,1)[0],g=Object(n.useRef)(),w=Object(n.useState)({}),y=Object(m.a)(w,2),x=y[0],k=x.name,I=x.email,z=y[1];Object(n.useEffect)((function(){i&&(null===g||void 0===g?void 0:g.current)&&g.current.focus()}),[i]);var q=function(e){l(e),e||(d(ve),z({}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,null,r.a.createElement(ee.a,{color:"primary",onClick:function(){return q(!i)}},i?r.a.createElement(H.a,null):r.a.createElement(X.a,null))),r.a.createElement(C.a,{in:i},r.a.createElement(h.a,null,r.a.createElement(j.a,{p:2},r.a.createElement(U.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,alignItems:"center"},r.a.createElement(j.a,{mr:2}),r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(U.a,{item:!0},"Name:"),r.a.createElement(U.a,{item:!0},r.a.createElement(be,{smallScreenWidth:"100px",required:!0,value:b,onChange:function(e){var t=e.target.value;d(Object(O.a)(Object(O.a)({},s),{},{name:t})),z((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:null})}))},inputRef:g,error:null===k||void 0===k?void 0:k.error})))))),r.a.createElement(U.a,{item:!0},r.a.createElement(U.a,{container:!0,direction:"row",spacing:2},r.a.createElement(U.a,{item:!0},r.a.createElement(S.a,{size:"small",onClick:function(){q(!1)}},r.a.createElement(H.a,{fontSize:"small"}))),r.a.createElement(U.a,{item:!0},r.a.createElement(S.a,{size:"small",onClick:function(){(function(){var e;return b||(e=!0,z((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:{label:"Required",error:!0}})}))),D(v)||(e=!0,z((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e})()&&(q(!1),p({variables:{user:{name:b,email:v}}}))}},r.a.createElement(T.a,{fontSize:"small"})))))),r.a.createElement(se,null,r.a.createElement(U.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(U.a,{item:!0},"User email:"),r.a.createElement(U.a,{item:!0},r.a.createElement(be,{smallScreenWidth:"150px",required:!0,value:v,onChange:function(e){var t=e.target.value;d(Object(O.a)(Object(O.a)({},s),{},{email:t})),z((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:null})}))},error:null===I||void 0===I?void 0:I.error}))))))))},Ee=a(16),je=a.n(Ee),pe=a(27),Oe=a(37),ge=a.n(Oe),he=Object(n.createContext)(),we=function(e){return function(t){return r.a.createElement(he.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{useAuth:a}))}))}},Ce=Object(E.a)(j.a)({overflowY:"scroll",display:"flex",flex:"1"}),ye=we((function(e){var t=e.useAuth,a=Object(f.b)(oe,{variables:le}),c=a.loading,i=a.data,l=a.refetch,o=Object(f.a)(ue,{update:function(e,t){var a=t.data.deleteUser,n=e.readQuery({query:oe,variables:le}).users;e.writeQuery({query:oe,data:{users:n.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)}))},variables:le})}}),u=Object(m.a)(o,1)[0],s=Object(f.a)(me),b=Object(m.a)(s,1)[0],v=t(),E=Object(m.a)(v,1)[0].client;return Object(n.useEffect)((function(){(null===E||void 0===E?void 0:E._id)&&l({variables:le})}),[null===E||void 0===E?void 0:E._id]),r.a.createElement(Ce,{pt:2,mb:2},E?null:r.a.createElement(d.a,{to:"".concat("/ruvod-test","/login")}),r.a.createElement(p.a,{maxWidth:"sm"},r.a.createElement(K,{users:null===i||void 0===i?void 0:i.users,loading:c,deleteItem:function(e){return u({variables:{id:e}})},updateItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b({variables:{id:e,user:t}})}}),r.a.createElement(j.a,{mt:3},r.a.createElement(fe,null))))})),xe=a(212),ke=a(213),Ie=a(211),Se=a(118),ze=a.n(Se),qe=a(117),Re=a.n(qe),Ae=a(79),Ue=new Ae.a({pathPrefix:"".concat(u,"/webauthn")}),$e=Object(E.a)(S.a)({color:"#FFF"}),Fe=Object(E.a)(Ie.a)({color:"#FFF",minHeight:"64px",textTransform:"none",borderRadius:0,fontSize:"16px"}),We=Object(E.a)(U.a)({minHeight:"64px"}),Pe=we((function(e){var t=(0,e.useAuth)(),a=Object(m.a)(t,2),n=a[0],c=(n=void 0===n?{}:n).client,i=n.error,l=a[1];return r.a.createElement(r.a.Fragment,null,i||!c?r.a.createElement(d.a,{to:"".concat("/ruvod-test","/login")}):null,r.a.createElement("div",{style:{height:"64px"}}),r.a.createElement(xe.a,{position:"fixed"},r.a.createElement(ke.a,{disableGutters:!0},r.a.createElement(p.a,{maxWidth:"md"},r.a.createElement(We,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(U.a,{item:!0},r.a.createElement(s.b,{to:"".concat("/ruvod-test","/")},r.a.createElement(Fe,null,"Home"))),r.a.createElement(U.a,{item:!0},c?r.a.createElement(U.a,{container:!0,alignItems:"center",spacing:2},r.a.createElement(U.a,{item:!0},r.a.createElement("div",null,(null===c||void 0===c?void 0:c.name)?"Hi, ".concat(c.name):"Hi, user")),r.a.createElement(U.a,{item:!0},r.a.createElement($e,{onClick:Object(pe.a)(je.a.mark((function e(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ge.a.get("".concat(u,"/logout"),{withCredentials:!0}),Ue.logout()]);case 2:l((function(e){e.client;var t=Object(g.a)(e,["client"]);return Object(O.a)({},t)}));case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(Re.a,null)))):r.a.createElement(s.b,{to:"".concat("/ruvod-test","/login")},r.a.createElement($e,null,r.a.createElement(ze.a,null)))))))))})),Le=a(119),Te=a.n(Le),Ne=Object(E.a)(S.a)((function(e){var t=e.theme;return{color:e.active?t.palette.primary.main:"#000"}})),He=function(e){var t=e.children,a=Object(g.a)(e,["children"]);return r.a.createElement(U.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(U.a,{item:!0,key:t},e)})))},Be=we((function(e){var t=e.active,a=e.setAuthControls,c=e.onClick;return Object(n.useEffect)((function(){return t&&a&&a({element:r.a.createElement(He,{container:!0,spacing:2,direction:"column"},r.a.createElement(Y.a,null,"Follow the open window"),r.a.createElement(He,{container:!0,spacing:2,direction:"column"},r.a.createElement(Ie.a,{variant:"outlined",onClick:function(){return c&&c()}},"Cancel")))}),function(){return a&&a(null)}}),[t]),r.a.createElement("a",{href:"".concat(u,"/auth/github/login")},r.a.createElement(Ne,{active:t,onClick:function(e){t&&e.stopPropagation(),c&&c()}},r.a.createElement(Te.a,null)))})),De=a(121),Me=a.n(De),Qe=a(217),Je=new Ae.a({pathPrefix:"".concat(u,"/webauthn")}),Ze=Object(E.a)(S.a)((function(e){var t=e.theme;return{color:e.active?t.palette.primary.main:"#000"}})),_e=Object(E.a)(P.a)({width:"100%"}),Ge=function(e){var t=e.children,a=Object(g.a)(e,["children"]);return r.a.createElement(U.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(U.a,{item:!0,key:t},e)})))},Ye=we((function(e){var t=e.onCancel,a=(0,e.useAuth)(),c=Object(m.a)(a,2)[1],i=Object(n.useState)({email:""}),l=Object(m.a)(i,2),o=l[0],s=l[1],d=o.email,b=Object(n.useRef)(),v=Object(n.useState)({}),f=Object(m.a)(v,2),E=f[0].email,j=f[1];Object(n.useEffect)((function(){(null===b||void 0===b?void 0:b.current)&&b.current.focus()}),[b]);var p=function(){var e;return D(d)||(e=!0,j((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(Ge,{container:!0,spacing:2,direction:"column"},r.a.createElement(Ge,{container:!0,spacing:2,direction:"column"},r.a.createElement(_e,{required:!0,variant:"outlined",type:"email",size:"small",value:d,onChange:function(e){var t=e.target.value;s(Object(O.a)(Object(O.a)({},o),{},{email:t})),j((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:null})}))},inputRef:b,error:null===E||void 0===E?void 0:E.error,label:(null===E||void 0===E?void 0:E.label)||"Email"})),r.a.createElement(Ge,{container:!0,justify:"space-between"},r.a.createElement(Ie.a,{variant:"outlined",onClick:t},"Cancel"),r.a.createElement(Ie.a,{variant:"contained",color:"primary",onClick:Object(pe.a)(je.a.mark((function e(){var t,a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p()){e.next=14;break}return e.prev=1,e.next=4,Je.login({username:d});case 4:return e.next=6,ge.a.get("".concat(u,"/auth/webauthn"),{withCredentials:!0});case 6:t=e.sent,a=t.data.client,c({client:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),alert("login failed ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))},"Login")))})),Ke=we((function(e){var t=e.onCancel,a=(0,e.useAuth)(),c=Object(m.a)(a,2)[1],i=Object(n.useState)({name:"",email:""}),l=Object(m.a)(i,2),o=l[0],s=l[1],d=o.name,b=o.email,v=Object(n.useRef)(),f=Object(n.useState)({}),E=Object(m.a)(f,2),j=E[0],p=j.email,g=j.name,h=E[1];Object(n.useEffect)((function(){(null===v||void 0===v?void 0:v.current)&&v.current.focus()}),[v]);var w=function(){var e;return d||(e=!0,h((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:{label:"Required",error:!0}})}))),D(b)||(e=!0,h((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(Ge,{container:!0,spacing:2,direction:"column"},r.a.createElement(Ge,{container:!0,spacing:2,direction:"column"},r.a.createElement(_e,{required:!0,variant:"outlined",type:"name",size:"small",value:d,onChange:function(e){var t=e.target.value;s(Object(O.a)(Object(O.a)({},o),{},{name:t})),h((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:null})}))},inputRef:v,error:null===g||void 0===g?void 0:g.error,label:(null===g||void 0===g?void 0:g.label)||"Name"}),r.a.createElement(_e,{required:!0,variant:"outlined",type:"email",size:"small",value:b,onChange:function(e){var t=e.target.value;s(Object(O.a)(Object(O.a)({},o),{},{email:t})),h((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:null})}))},error:null===p||void 0===p?void 0:p.error,label:(null===p||void 0===p?void 0:p.label)||"Email"})),r.a.createElement(Ge,{container:!0,justify:"space-between"},r.a.createElement(Ie.a,{variant:"outlined",onClick:t},"Cancel"),r.a.createElement(Ie.a,{variant:"contained",color:"primary",onClick:Object(pe.a)(je.a.mark((function e(){var t,a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w()){e.next=14;break}return e.prev=1,e.next=4,Je.register({username:b,name:d});case 4:return e.next=6,ge.a.get("".concat(u,"/auth/webauthn"),{withCredentials:!0});case 6:t=e.sent,a=t.data.client,c({client:a}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),alert("register failed ".concat(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))},"Registration")))})),Ve=function(e){var t=e.setAuthControls,a=e.active,c=e.onClick,i=e.type;return Object(n.useEffect)((function(){if(a){var e;switch(i){case"login":e={element:r.a.createElement(Ye,{onCancel:function(){return c&&c()}})};break;case"registration":e={element:r.a.createElement(Ke,{onCancel:function(){return c&&c()}})}}t&&t(e||null)}return function(){return t&&t(null)}}),[a,i]),r.a.createElement(Qe.a,{title:r.a.createElement(Y.a,null,"WebAuthn")},r.a.createElement(Ze,{active:a,onClick:function(){c&&c()}},r.a.createElement(Me.a,null)))},Xe=function(e){var t=e.children,a=e.itemProps,n=void 0===a?{}:a,c=e.value,i=e.onSelect,l=Object(g.a)(e,["children","itemProps","value","onSelect"]);return r.a.createElement(U.a,l,t.map((function(e,t){return r.a.createElement(U.a,{item:!0,key:t},r.a.cloneElement(e,Object(O.a)({active:t===c,onClick:function(){return i(t)}},n)))})))},et=function(e){var t=e.type,a=e.setAuthControls,c=Object(n.useState)(),i=Object(m.a)(c,2),l=i[0],o=i[1];return r.a.createElement(Xe,{container:!0,justify:"center",spacing:1,onSelect:function(e){return o(e===l?null:e)},value:l,itemProps:{type:t,setAuthControls:a}},r.a.createElement(Be,null),r.a.createElement(Ve,null))},tt=function(e){var t=e.children,a=Object(g.a)(e,["children"]);return r.a.createElement(U.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(U.a,{item:!0,key:t},e)})))},at=Object(E.a)(p.a)((function(e){var t=e.theme;return Object(W.a)({marginTop:t.spacing(2),width:"350px"},t.breakpoints.down("xs"),{width:"320px"})})),nt=Object(E.a)(Y.a)((function(e){return{marginBottom:e.theme.spacing(6)}})),rt=Object(E.a)(P.a)({width:"100%"}),ct=Object(E.a)(s.b)({textDecoration:"none"}),it=we((function(e){var t=(0,e.useAuth)(),a=Object(m.a)(t,2),c=a[0].client,i=a[1],l=Object(n.useState)({name:"",email:"",password:""}),o=Object(m.a)(l,2),s=o[0],b=o[1],v=s.name,f=s.email,E=s.password,p=Object(n.useRef)(),g=Object(n.useState)({}),w=Object(m.a)(g,2),C=w[0],y=C.name,x=C.email,k=C.password,I=w[1],S=Object(n.useState)(),z=Object(m.a)(S,2),q=z[0],R=z[1];Object(n.useEffect)((function(){(null===p||void 0===p?void 0:p.current)&&p.current.focus()}),[p]);return r.a.createElement(at,null,c?r.a.createElement(d.a,{to:"".concat("/ruvod-test","/")}):null,r.a.createElement(h.a,null,r.a.createElement(j.a,{p:2},r.a.createElement(tt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(nt,{variant:"h6"},"Registration"),r.a.createElement(et,{type:"registration",setAuthControls:R}),q?null===q||void 0===q?void 0:q.element:r.a.createElement(tt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(tt,{container:!0,spacing:2,direction:"column"},r.a.createElement(rt,{required:!0,variant:"outlined",size:"small",value:v,onChange:function(e){var t=e.target.value;b(Object(O.a)(Object(O.a)({},s),{},{name:t})),I((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:null})}))},inputRef:p,error:null===y||void 0===y?void 0:y.error,label:(null===y||void 0===y?void 0:y.label)||"Name"}),r.a.createElement(rt,{required:!0,variant:"outlined",type:"email",size:"small",value:f,onChange:function(e){var t=e.target.value;b(Object(O.a)(Object(O.a)({},s),{},{email:t})),I((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:null})}))},error:null===x||void 0===x?void 0:x.error,label:(null===x||void 0===x?void 0:x.label)||"Email"}),r.a.createElement(rt,{required:!0,variant:"outlined",type:"password",size:"small",value:E,onChange:function(e){var t=e.target.value;b(Object(O.a)(Object(O.a)({},s),{},{password:t})),I((function(e){return Object(O.a)(Object(O.a)({},e),{},{password:null})}))},error:null===k||void 0===k?void 0:k.error,label:(null===k||void 0===k?void 0:k.label)||"Password"})),r.a.createElement(tt,{container:!0,justify:"space-between"},r.a.createElement(ct,{to:"".concat("/ruvod-test","/login")},r.a.createElement(Ie.a,{variant:"outlined"},"Login")),r.a.createElement(Ie.a,{variant:"contained",color:"primary",onClick:function(){(function(){var e;return v||(e=!0,I((function(e){return Object(O.a)(Object(O.a)({},e),{},{name:{label:"Required",error:!0}})}))),E||(e=!0,I((function(e){return Object(O.a)(Object(O.a)({},e),{},{password:{label:"Required",error:!0}})}))),D(f)||(e=!0,I((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e})()&&ge.a.post("".concat(u,"/createClient"),{email:f,password:E,name:v},{withCredentials:!0}).then((function(e){var t=e.data;i({client:t.client})})).catch((function(){I({password:{error:!0},email:{error:!0},name:{error:!0}})}))}},"Registration")))))))})),lt=function(e){var t=e.children,a=Object(g.a)(e,["children"]);return r.a.createElement(U.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(U.a,{item:!0,key:t},e)})))},ot=Object(E.a)(p.a)((function(e){var t=e.theme;return Object(W.a)({marginTop:t.spacing(2),width:"350px"},t.breakpoints.down("xs"),{width:"320px"})})),ut=Object(E.a)(Y.a)((function(e){return{marginBottom:e.theme.spacing(6)}})),mt=Object(E.a)(P.a)({width:"100%"}),st=Object(E.a)(s.b)({textDecoration:"none"}),dt=we((function(e){var t=(0,e.useAuth)(),a=Object(m.a)(t,2),c=a[0].client,i=a[1],l=Object(n.useState)({password:"",email:""}),o=Object(m.a)(l,2),s=o[0],b=o[1],v=s.password,f=s.email,E=Object(n.useRef)(),p=Object(n.useState)({}),g=Object(m.a)(p,2),w=g[0],C=w.password,y=w.email,x=g[1],k=Object(n.useState)(),I=Object(m.a)(k,2),S=I[0],z=I[1];Object(n.useEffect)((function(){(null===E||void 0===E?void 0:E.current)&&E.current.focus()}),[E]);return r.a.createElement(ot,null,c?r.a.createElement(d.a,{to:"".concat("/ruvod-test","/")}):null,r.a.createElement(h.a,null,r.a.createElement(j.a,{p:2},r.a.createElement(lt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(ut,{variant:"h6"},"Login"),r.a.createElement(et,{type:"login",setAuthControls:z}),S?null===S||void 0===S?void 0:S.element:r.a.createElement(lt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(lt,{container:!0,spacing:2,direction:"column"},r.a.createElement(mt,{required:!0,variant:"outlined",type:"email",size:"small",value:f,onChange:function(e){var t=e.target.value;b(Object(O.a)(Object(O.a)({},s),{},{email:t})),x((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:null})}))},inputRef:E,error:null===y||void 0===y?void 0:y.error,label:(null===y||void 0===y?void 0:y.label)||"Email"}),r.a.createElement(mt,{required:!0,type:"password",variant:"outlined",size:"small",value:v,onChange:function(e){var t=e.target.value;b(Object(O.a)(Object(O.a)({},s),{},{password:t})),x((function(e){return Object(O.a)(Object(O.a)({},e),{},{password:null})}))},error:null===C||void 0===C?void 0:C.error,label:(null===C||void 0===C?void 0:C.label)||"Password"})),r.a.createElement(lt,{container:!0,justify:"space-between"},r.a.createElement(st,{to:"".concat("/ruvod-test","/registration")},r.a.createElement(Ie.a,{variant:"outlined",href:"registration"},"Registration")),r.a.createElement(Ie.a,{variant:"contained",color:"primary",onClick:function(){(function(){var e;return v||(e=!0,x((function(e){return Object(O.a)(Object(O.a)({},e),{},{password:{label:"Required",error:!0}})}))),D(f)||(e=!0,x((function(e){return Object(O.a)(Object(O.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e})()&&ge.a.post("".concat(u,"/auth"),{email:f,password:v},{withCredentials:!0}).then((function(e){var t=e.data;i({client:t.client})})).catch((function(){x({password:{error:!0},email:{error:!0}})}))}},"Login")))))))})),bt=(a(163),Object(b.a)("div")({display:"flex",flex:"1",justifyContent:"center",alignItems:"center"})),vt=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(m.a)(t,2),r=a[0],c=a[1],i=function(){return c.apply(void 0,arguments)};return i.fetch=Object(pe.a)(je.a.mark((function e(){var t,a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(Object(O.a)(Object(O.a)({},r),{},{loading:!0})),e.next=4,ge.a.get("".concat(u,"/auth"),{withCredentials:!0});case 4:t=e.sent,a=t.data,i({client:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({error:!0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[r,i]}({loading:!0}),t=Object(m.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){c.fetch()}),[]),r.a.createElement(he.Provider,{value:function(){return[a,c]}},(null===a||void 0===a?void 0:a.loading)?r.a.createElement(bt,null,r.a.createElement(v.a,null)):r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(Pe,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"".concat("/ruvod-test","/")},r.a.createElement(ye,null)),r.a.createElement(d.b,{path:"".concat("/ruvod-test","/registration")},r.a.createElement(it,null)),r.a.createElement(d.b,{path:"".concat("/ruvod-test","/login")},r.a.createElement(dt,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ft=new o.a({uri:"".concat(u,"/graphql"),credentials:"include"});i.a.render(r.a.createElement(l.a,{client:ft},r.a.createElement(vt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[133,1,2]]]);
//# sourceMappingURL=main.6938aebe.chunk.js.map