(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(e,t,a){e.exports=a(167)},162:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),i=a.n(c),l=a(25),o=a(56),u="https://ruvodtest.herokuapp.com",m=a(54),s=a(109),d=a(4),b=a(12),f=a.n(b),v=a(19),E=a(50),p=a.n(E),j=function(e){return{type:"LOADING",payload:e}},O=function(e){return{type:"AUTH_ERROR",payload:e}},g=function(e){return{type:"AUTH",payload:e}},h=function(e){var t=e.email,a=e.password;return function(e){return p.a.post("".concat(u,"/auth"),{email:t,password:a},{withCredentials:!0}).then((function(t){var a=t.data;e(g(a.client))}))}},w=function(e){var t=e.email,a=e.password,n=e.name;return function(e){return p.a.post("".concat(u,"/createClient"),{email:t,password:a,name:n},{withCredentials:!0}).then((function(t){var a=t.data;e(g(a.client))}))}},y=function(){return function(){var e=Object(v.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(u,"/auth/webauthn"),{withCredentials:!0});case 2:a=e.sent,n=a.data.client,t(g(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return Object(d.a)(Object(d.a)({},e),{},{loading:t.payload,error:!1});case"AUTH":return Object(d.a)(Object(d.a)({},e),{},{client:t.payload,loading:!1,error:!1});case"AUTH_ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.payload,loading:!1});case"FORGET_CLIENT":return Object(d.a)(Object(d.a)({},e),{},{client:void 0});default:return e}},C=Object(m.c)({auth:x}),k=Object(m.d)(C,Object(m.a)(s.a)),I=a(26),S=(a(162),a(41)),R=a(18),z=a(169),A=a(217),q=a(14),U=a(62),F=a(111),T=a(219),$=a(213),L=a(33),W=a(171),N=a(207),H=a(203),P=a(77),D=a.n(P),_=a(76),G=a.n(_),B=a(206),M=a(116),Q=a.n(M),J=a(115),Z=a.n(J),Y=a(205),K=Object(F.a)("div")({display:"flex",marginLeft:"46px",marginTop:"8px"}),V=function(e){var t=e.name,a=e.email,c=e.deleteItem,i=e.showCard,l=e.showMoreInfo,o=e.setStore;return Object(n.useEffect)((function(){setTimeout((function(){return o({showCard:!0})}),100)}),[]),r.a.createElement(H.a,{in:i},r.a.createElement(W.a,null,r.a.createElement(T.a,{p:2},r.a.createElement(Y.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,alignItems:"center",direction:"row"},r.a.createElement(T.a,{mr:2},r.a.createElement(B.a,{size:"small",onClick:function(){return o({showMoreInfo:!l})}},l?r.a.createElement(G.a,null):r.a.createElement(D.a,null))),r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(Y.a,{item:!0},"Name:"),r.a.createElement(Y.a,{item:!0},t))))),r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,direction:"row",spacing:2},r.a.createElement(Y.a,{item:!0},r.a.createElement(B.a,{size:"small",onClick:function(){o({edit:!0})}},r.a.createElement(Z.a,{fontSize:"small"}))),r.a.createElement(Y.a,{item:!0},r.a.createElement(B.a,{size:"small",onClick:function(){o({showCard:!1}),c()}},r.a.createElement(Q.a,{fontSize:"small"})))))),r.a.createElement(N.a,{in:l},r.a.createElement(K,null,r.a.createElement(Y.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(Y.a,{item:!0},"User email:"),r.a.createElement(Y.a,{item:!0},a)))))))},X=a(40),ee=a(218),te=a(79),ae=a.n(te),ne=a(67),re=a.n(ne),ce=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ie=function(e){return ce.test(e)},le=Object(F.a)("div")({display:"flex",marginLeft:"46px",marginTop:"10px"}),oe=Object(F.a)(ee.a)((function(e){var t=e.theme,a=e.smallScreenWidth;return Object(X.a)({},t.breakpoints.down("xs"),{width:a})})),ue=function(e){var t=e.name,a=e.email,c=e.showMoreInfo,i=e.showCard,l=e.setStore,o=e.updateItem,u=Object(n.useState)(t),m=Object(q.a)(u,2),s=m[0],b=m[1],f=Object(n.useState)(a),v=Object(q.a)(f,2),E=v[0],p=v[1],j=Object(n.useState)({}),O=Object(q.a)(j,2),g=O[0],h=g.name,w=g.email,y=O[1];return r.a.createElement(H.a,{in:i},r.a.createElement(W.a,null,r.a.createElement(T.a,{p:2},r.a.createElement(Y.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,alignItems:"center"},r.a.createElement(T.a,{mr:2},r.a.createElement(B.a,{size:"small",onClick:function(){return l({showMoreInfo:!c})}},c?r.a.createElement(G.a,null):r.a.createElement(D.a,null))),r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(Y.a,{item:!0},"Name:"),r.a.createElement(Y.a,{item:!0},r.a.createElement(oe,{smallScreenWidth:"90px",value:s,onChange:function(e){var t=e.target.value;b(t),y((function(e){return Object(d.a)(Object(d.a)({},e),{},{name:null})}))},error:null===h||void 0===h?void 0:h.error})))))),r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,direction:"row",spacing:2},r.a.createElement(Y.a,{item:!0},r.a.createElement(B.a,{size:"small",onClick:function(){l({edit:!1})}},r.a.createElement(re.a,{fontSize:"small"}))),r.a.createElement(Y.a,{item:!0},r.a.createElement(B.a,{size:"small",onClick:function(){(function(){var e;return s||(e=!0,y((function(e){return Object(d.a)(Object(d.a)({},e),{},{name:{label:"Required",error:!0}})}))),ie(E)||(e=!0,y((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e})()&&(l({name:s,email:E,edit:!1}),o({name:s,email:E}))}},r.a.createElement(ae.a,{fontSize:"small"})))))),r.a.createElement(N.a,{in:c},r.a.createElement(le,null,r.a.createElement(Y.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(Y.a,{item:!0},"User email:"),r.a.createElement(Y.a,{item:!0},r.a.createElement(oe,{smallScreenWidth:"140px",value:E,onChange:function(e){var t=e.target.value;p(t),y((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:null})}))},error:null===w||void 0===w?void 0:w.error}))))))))},me=function(e){var t=e.deleteItem,a=e.updateItem,c=Object(L.a)(e,["deleteItem","updateItem"]),i=Object(n.useState)(Object(d.a)({},c)),l=Object(q.a)(i,2),o=l[0],u=l[1],m=o.edit,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(Object(d.a)(Object(d.a)({},o),e))};return r.a.createElement(r.a.Fragment,null,m?r.a.createElement(ue,Object.assign({},o,{setStore:s,updateItem:a})):r.a.createElement(V,Object.assign({},o,{setStore:s,deleteItem:t})))},se=a(210),de=function(e){var t=e.opacity,a=void 0===t?1:t;return r.a.createElement(W.a,{style:{opacity:a}},r.a.createElement(T.a,{p:2},r.a.createElement(Y.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,alignItems:"center",direction:"row"},r.a.createElement(T.a,{mr:4}),r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(Y.a,{item:!0},r.a.createElement(se.a,{variant:"text",height:30,width:45})),r.a.createElement(Y.a,{item:!0},r.a.createElement(se.a,{variant:"text",height:30,width:145})))))),r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,direction:"row",spacing:2},r.a.createElement(Y.a,{item:!0},r.a.createElement(se.a,{variant:"text",height:30,width:18})),r.a.createElement(Y.a,{item:!0},r.a.createElement(se.a,{variant:"text",height:30,width:18})))))))},be=a(211),fe=function(e){var t=e.loading,a=e.users,n=void 0===a?[]:a,c=e.deleteItem,i=e.updateItem;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(Y.a,{container:!0,spacing:3},Array(6).fill(null).map((function(e,t){return r.a.createElement(Y.a,{item:!0,xs:12,key:t},r.a.createElement(de,{opacity:1-1.5*t/10}))}))):r.a.createElement(r.a.Fragment,null,n.length?r.a.createElement(Y.a,{container:!0,spacing:3},n.map((function(e){return r.a.createElement(Y.a,{item:!0,xs:12,key:e.id},r.a.createElement(me,Object.assign({},e,{deleteItem:function(){return c(e.id)},updateItem:function(t){return i(e.id,t)}})))}))):r.a.createElement(be.a,null,"Users list is empty")))},ve=a(119),Ee=a.n(ve),pe=a(212),je=a(69);function Oe(){var e=Object(je.a)(["\n  mutation updateUser($id: ID!, $user: UpdateUserInput!) {\n    updateUser(id: $id, input: $user) {\n      id\n      email\n      name\n    }\n  }\n"]);return Oe=function(){return e},e}function ge(){var e=Object(je.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id) {\n      id\n      email\n      name\n    }\n  }\n"]);return ge=function(){return e},e}function he(){var e=Object(je.a)(["\n  query getUsers($skip: Int, $limit: Int) {\n    users(skip: $skip, limit: $limit) {\n      id\n      email\n      name\n    }\n  }\n"]);return he=function(){return e},e}function we(){var e=Object(je.a)(["\n  mutation createUser($user: CreateUserInput!) {\n    createUser(input: $user) {\n      id\n      email\n      name\n    }\n  }\n"]);return we=function(){return e},e}var ye=Object(o.b)(we()),xe={limit:100},Ce=Object(o.b)(he()),ke=Object(o.b)(ge()),Ie=Object(o.b)(Oe()),Se=Object(F.a)("div")({display:"flex",marginLeft:"16px",marginTop:"10px"}),Re=Object(F.a)("div")({position:"fixed",bottom:"15vh",right:"20vw"}),ze=Object(F.a)(ee.a)((function(e){var t=e.theme,a=e.smallScreenWidth;return Object(X.a)({},t.breakpoints.down("xs"),{width:a})})),Ae={name:"",email:""},qe=function(e){var t=e.defaultShow,a=Object(n.useState)(t),c=Object(q.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)(Ae),u=Object(q.a)(o,2),m=u[0],s=u[1],b=m.name,f=m.email,v=Object(U.a)(ye,{update:function(e,t){var a=t.data.createUser,n=e.readQuery({query:Ce,variables:xe}).users;e.writeQuery({query:Ce,data:{users:n.concat(a)},variables:xe})}}),E=Object(q.a)(v,1)[0],p=Object(n.useRef)(),j=Object(n.useState)({}),O=Object(q.a)(j,2),g=O[0],h=g.name,w=g.email,y=O[1];Object(n.useEffect)((function(){i&&(null===p||void 0===p?void 0:p.current)&&p.current.focus()}),[i]);var x=function(e){l(e),e||(s(Ae),y({}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Re,null,r.a.createElement(pe.a,{color:"primary",onClick:function(){return x(!i)}},i?r.a.createElement(re.a,null):r.a.createElement(Ee.a,null))),r.a.createElement(H.a,{in:i},r.a.createElement(W.a,null,r.a.createElement(T.a,{p:2},r.a.createElement(Y.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,alignItems:"center"},r.a.createElement(T.a,{mr:2}),r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(Y.a,{item:!0},"Name:"),r.a.createElement(Y.a,{item:!0},r.a.createElement(ze,{smallScreenWidth:"100px",required:!0,value:b,onChange:function(e){var t=e.target.value;s(Object(d.a)(Object(d.a)({},m),{},{name:t})),y((function(e){return Object(d.a)(Object(d.a)({},e),{},{name:null})}))},inputRef:p,error:null===h||void 0===h?void 0:h.error})))))),r.a.createElement(Y.a,{item:!0},r.a.createElement(Y.a,{container:!0,direction:"row",spacing:2},r.a.createElement(Y.a,{item:!0},r.a.createElement(B.a,{size:"small",onClick:function(){x(!1)}},r.a.createElement(re.a,{fontSize:"small"}))),r.a.createElement(Y.a,{item:!0},r.a.createElement(B.a,{size:"small",onClick:function(){(function(){var e;return b||(e=!0,y((function(e){return Object(d.a)(Object(d.a)({},e),{},{name:{label:"Required",error:!0}})}))),ie(f)||(e=!0,y((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e})()&&(x(!1),E({variables:{user:{name:b,email:f}}}))}},r.a.createElement(ae.a,{fontSize:"small"})))))),r.a.createElement(Se,null,r.a.createElement(Y.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(Y.a,{item:!0},"User email:"),r.a.createElement(Y.a,{item:!0},r.a.createElement(ze,{smallScreenWidth:"150px",required:!0,value:f,onChange:function(e){var t=e.target.value;s(Object(d.a)(Object(d.a)({},m),{},{email:t})),y((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:null})}))},error:null===w||void 0===w?void 0:w.error}))))))))},Ue=Object(F.a)(T.a)({overflowY:"scroll",display:"flex",flex:"1"}),Fe=Object(I.b)((function(e){return{client:e.auth.client}}))((function(e){var t=e.client,a=Object(U.b)(Ce,{variables:xe}),c=a.loading,i=a.data,l=a.refetch,o=Object(U.a)(ke,{update:function(e,t){var a=t.data.deleteUser,n=e.readQuery({query:Ce,variables:xe}).users;e.writeQuery({query:Ce,data:{users:n.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)}))},variables:xe})}}),u=Object(q.a)(o,1)[0],m=Object(U.a)(Ie),s=Object(q.a)(m,1)[0];return Object(n.useEffect)((function(){(null===t||void 0===t?void 0:t._id)&&l({variables:xe})}),[null===t||void 0===t?void 0:t._id]),r.a.createElement(Ue,{pt:2,mb:2},t?null:r.a.createElement(R.a,{to:"".concat("/ruvod-test","/login")}),r.a.createElement($.a,{maxWidth:"sm"},r.a.createElement(fe,{users:null===i||void 0===i?void 0:i.users,loading:c,deleteItem:function(e){return u({variables:{id:e}})},updateItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s({variables:{id:e,user:t}})}}),r.a.createElement(T.a,{mt:3},r.a.createElement(qe,null))))})),Te=a(215),$e=a(216),Le=a(214),We=a(121),Ne=a.n(We),He=a(120),Pe=a.n(He),De=a(82),_e=new De.a({pathPrefix:"".concat(u,"/webauthn")}),Ge=Object(F.a)(B.a)({color:"#FFF"}),Be=Object(F.a)(Le.a)({color:"#FFF",minHeight:"64px",textTransform:"none",borderRadius:0,fontSize:"16px"}),Me=Object(F.a)(Y.a)({minHeight:"64px"}),Qe=Object(I.b)((function(e){var t=e.auth,a=void 0===t?{}:t;return Object(d.a)({},a)}),(function(e){return{forgetClient:function(){return e({type:"FORGET_CLIENT"})}}}))((function(e){var t=e.client,a=e.error,n=e.forgetClient;return r.a.createElement(r.a.Fragment,null,a||!t?r.a.createElement(R.a,{to:"".concat("/ruvod-test","/login")}):null,r.a.createElement("div",{style:{height:"64px"}}),r.a.createElement(Te.a,{position:"fixed"},r.a.createElement($e.a,{disableGutters:!0},r.a.createElement($.a,{maxWidth:"md"},r.a.createElement(Me,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(Y.a,{item:!0},r.a.createElement(S.b,{to:"".concat("/ruvod-test","/")},r.a.createElement(Be,null,"Home"))),r.a.createElement(Y.a,{item:!0},t?r.a.createElement(Y.a,{container:!0,alignItems:"center",spacing:2},r.a.createElement(Y.a,{item:!0},r.a.createElement("div",null,(null===t||void 0===t?void 0:t.name)?"Hi, ".concat(t.name):"Hi, user")),r.a.createElement(Y.a,{item:!0},r.a.createElement(Ge,{onClick:Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([p.a.get("".concat(u,"/logout"),{withCredentials:!0}),_e.logout()]);case 2:n();case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(Pe.a,null)))):r.a.createElement(S.b,{to:"".concat("/ruvod-test","/login")},r.a.createElement(Ge,null,r.a.createElement(Ne.a,null)))))))))})),Je=a(122),Ze=a.n(Je),Ye=Object(F.a)(B.a)((function(e){var t=e.theme;return{color:e.active?t.palette.primary.main:"#000"}})),Ke=function(e){var t=e.children,a=Object(L.a)(e,["children"]);return r.a.createElement(Y.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(Y.a,{item:!0,key:t},e)})))},Ve=function(e){var t=e.active,a=e.setAuthControls,c=e.onClick;return Object(n.useEffect)((function(){return t&&a&&a({element:r.a.createElement(Ke,{container:!0,spacing:2,direction:"column"},r.a.createElement(be.a,null,"Follow the open window"),r.a.createElement(Ke,{container:!0,spacing:2,direction:"column"},r.a.createElement(Le.a,{variant:"outlined",onClick:function(){return c&&c()}},"Cancel")))}),function(){return a&&a(null)}}),[t]),r.a.createElement("a",{href:"".concat(u,"/auth/github/login")},r.a.createElement(Ye,{active:t,onClick:function(e){t&&e.stopPropagation(),c&&c()}},r.a.createElement(Ze.a,null)))},Xe=a(124),et=a.n(Xe),tt=a(220),at=new De.a({pathPrefix:"".concat(u,"/webauthn")}),nt=Object(F.a)(B.a)((function(e){var t=e.theme;return{color:e.active?t.palette.primary.main:"#000"}})),rt=Object(F.a)(ee.a)({width:"100%"}),ct=function(e){var t=e.children,a=Object(L.a)(e,["children"]);return r.a.createElement(Y.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(Y.a,{item:!0,key:t},e)})))},it=Object(I.b)(null,(function(e){return{webAuthn:e(y())}}))((function(e){var t=e.onCancel,a=e.webAuthn,c=Object(n.useState)({email:""}),i=Object(q.a)(c,2),l=i[0],o=i[1],u=l.email,m=Object(n.useRef)(),s=Object(n.useState)({}),b=Object(q.a)(s,2),E=b[0].email,p=b[1];Object(n.useEffect)((function(){(null===m||void 0===m?void 0:m.current)&&m.current.focus()}),[m]);var j=function(){var e;return ie(u)||(e=!0,p((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(ct,{container:!0,spacing:2,direction:"column"},r.a.createElement(ct,{container:!0,spacing:2,direction:"column"},r.a.createElement(rt,{required:!0,variant:"outlined",type:"email",size:"small",value:u,onChange:function(e){var t=e.target.value;o(Object(d.a)(Object(d.a)({},l),{},{email:t})),p((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:null})}))},inputRef:m,error:null===E||void 0===E?void 0:E.error,label:(null===E||void 0===E?void 0:E.label)||"Email"})),r.a.createElement(ct,{container:!0,justify:"space-between"},r.a.createElement(Le.a,{variant:"outlined",onClick:t},"Cancel"),r.a.createElement(Le.a,{variant:"contained",color:"primary",onClick:Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j()){e.next=10;break}return e.prev=1,e.next=4,at.login({username:u});case 4:a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert("login failed ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))},"Login")))})),lt=Object(I.b)(null,(function(e){return{webAuthn:e(y())}}))((function(e){var t=e.onCancel,a=e.webAuthn,c=Object(n.useState)({name:"",email:""}),i=Object(q.a)(c,2),l=i[0],o=i[1],u=l.name,m=l.email,s=Object(n.useRef)(),b=Object(n.useState)({}),E=Object(q.a)(b,2),p=E[0],j=p.email,O=p.name,g=E[1];Object(n.useEffect)((function(){(null===s||void 0===s?void 0:s.current)&&s.current.focus()}),[s]);var h=function(){var e;return u||(e=!0,g((function(e){return Object(d.a)(Object(d.a)({},e),{},{name:{label:"Required",error:!0}})}))),ie(m)||(e=!0,g((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(ct,{container:!0,spacing:2,direction:"column"},r.a.createElement(ct,{container:!0,spacing:2,direction:"column"},r.a.createElement(rt,{required:!0,variant:"outlined",type:"name",size:"small",value:u,onChange:function(e){var t=e.target.value;o(Object(d.a)(Object(d.a)({},l),{},{name:t})),g((function(e){return Object(d.a)(Object(d.a)({},e),{},{name:null})}))},inputRef:s,error:null===O||void 0===O?void 0:O.error,label:(null===O||void 0===O?void 0:O.label)||"Name"}),r.a.createElement(rt,{required:!0,variant:"outlined",type:"email",size:"small",value:m,onChange:function(e){var t=e.target.value;o(Object(d.a)(Object(d.a)({},l),{},{email:t})),g((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:null})}))},error:null===j||void 0===j?void 0:j.error,label:(null===j||void 0===j?void 0:j.label)||"Email"})),r.a.createElement(ct,{container:!0,justify:"space-between"},r.a.createElement(Le.a,{variant:"outlined",onClick:t},"Cancel"),r.a.createElement(Le.a,{variant:"contained",color:"primary",onClick:Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h()){e.next=10;break}return e.prev=1,e.next=4,at.register({username:m,name:u});case 4:a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert("register failed ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))},"Registration")))})),ot=function(e){var t=e.setAuthControls,a=e.active,c=e.onClick,i=e.type;return Object(n.useEffect)((function(){if(a){var e;switch(i){case"login":e={element:r.a.createElement(it,{onCancel:function(){return c&&c()}})};break;case"registration":e={element:r.a.createElement(lt,{onCancel:function(){return c&&c()}})}}t&&t(e||null)}return function(){return t&&t(null)}}),[a,i]),r.a.createElement(tt.a,{title:r.a.createElement(be.a,null,"WebAuthn")},r.a.createElement(nt,{active:a,onClick:function(){c&&c()}},r.a.createElement(et.a,null)))},ut=function(e){var t=e.children,a=e.itemProps,n=void 0===a?{}:a,c=e.value,i=e.onSelect,l=Object(L.a)(e,["children","itemProps","value","onSelect"]);return r.a.createElement(Y.a,l,t.map((function(e,t){return r.a.createElement(Y.a,{item:!0,key:t},r.a.cloneElement(e,Object(d.a)({active:t===c,onClick:function(){return i(t)}},n)))})))},mt=function(e){var t=e.type,a=e.setAuthControls,c=Object(n.useState)(),i=Object(q.a)(c,2),l=i[0],o=i[1];return r.a.createElement(ut,{container:!0,justify:"center",spacing:1,onSelect:function(e){return o(e===l?null:e)},value:l,itemProps:{type:t,setAuthControls:a}},r.a.createElement(Ve,null),r.a.createElement(ot,null))},st=function(e){var t=e.children,a=Object(L.a)(e,["children"]);return r.a.createElement(Y.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(Y.a,{item:!0,key:t},e)})))},dt=Object(F.a)($.a)((function(e){var t=e.theme;return Object(X.a)({marginTop:t.spacing(2),width:"350px"},t.breakpoints.down("xs"),{width:"320px"})})),bt=Object(F.a)(be.a)((function(e){return{marginBottom:e.theme.spacing(6)}})),ft=Object(F.a)(ee.a)({width:"100%"}),vt=Object(F.a)(S.b)({textDecoration:"none"}),Et=Object(I.b)((function(e){return{client:e.auth.client}}),(function(e){return{registration:function(){return e(w.apply(void 0,arguments))}}}))((function(e){var t=e.client,a=e.registration,c=Object(n.useState)({name:"",email:"",password:""}),i=Object(q.a)(c,2),l=i[0],o=i[1],u=l.name,m=l.email,s=l.password,b=Object(n.useRef)(),E=Object(n.useState)({}),p=Object(q.a)(E,2),j=p[0],O=j.name,g=j.email,h=j.password,w=p[1],y=Object(n.useState)(),x=Object(q.a)(y,2),C=x[0],k=x[1];Object(n.useEffect)((function(){(null===b||void 0===b?void 0:b.current)&&b.current.focus()}),[b]);var I=function(){var e;return u||(e=!0,w((function(e){return Object(d.a)(Object(d.a)({},e),{},{name:{label:"Required",error:!0}})}))),s||(e=!0,w((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:{label:"Required",error:!0}})}))),ie(m)||(e=!0,w((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(dt,null,t?r.a.createElement(R.a,{to:"".concat("/ruvod-test","/")}):null,r.a.createElement(W.a,null,r.a.createElement(T.a,{p:2},r.a.createElement(st,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(bt,{variant:"h6"},"Registration"),r.a.createElement(mt,{type:"registration",setAuthControls:k}),C?null===C||void 0===C?void 0:C.element:r.a.createElement(st,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(st,{container:!0,spacing:2,direction:"column"},r.a.createElement(ft,{required:!0,variant:"outlined",size:"small",value:u,onChange:function(e){var t=e.target.value;o(Object(d.a)(Object(d.a)({},l),{},{name:t})),w((function(e){return Object(d.a)(Object(d.a)({},e),{},{name:null})}))},inputRef:b,error:null===O||void 0===O?void 0:O.error,label:(null===O||void 0===O?void 0:O.label)||"Name"}),r.a.createElement(ft,{required:!0,variant:"outlined",type:"email",size:"small",value:m,onChange:function(e){var t=e.target.value;o(Object(d.a)(Object(d.a)({},l),{},{email:t})),w((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:null})}))},error:null===g||void 0===g?void 0:g.error,label:(null===g||void 0===g?void 0:g.label)||"Email"}),r.a.createElement(ft,{required:!0,variant:"outlined",type:"password",size:"small",value:s,onChange:function(e){var t=e.target.value;o(Object(d.a)(Object(d.a)({},l),{},{password:t})),w((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:null})}))},error:null===h||void 0===h?void 0:h.error,label:(null===h||void 0===h?void 0:h.label)||"Password"})),r.a.createElement(st,{container:!0,justify:"space-between"},r.a.createElement(vt,{to:"".concat("/ruvod-test","/login")},r.a.createElement(Le.a,{variant:"outlined"},"Login")),r.a.createElement(Le.a,{variant:"contained",color:"primary",onClick:Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I()){e.next=9;break}return e.prev=1,e.next=4,a({email:m,password:s,name:u});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),w({password:{error:!0},email:{error:!0},name:{error:!0}});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))},"Registration")))))))})),pt=function(e){var t=e.children,a=Object(L.a)(e,["children"]);return r.a.createElement(Y.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(Y.a,{item:!0,key:t},e)})))},jt=Object(F.a)($.a)((function(e){var t=e.theme;return Object(X.a)({marginTop:t.spacing(2),width:"350px"},t.breakpoints.down("xs"),{width:"320px"})})),Ot=Object(F.a)(be.a)((function(e){return{marginBottom:e.theme.spacing(6)}})),gt=Object(F.a)(ee.a)({width:"100%"}),ht=Object(F.a)(S.b)({textDecoration:"none"}),wt=Object(I.b)((function(e){return{client:e.auth.client}}),(function(e){return{logIn:function(){return e(h.apply(void 0,arguments))}}}))((function(e){var t=e.client,a=e.logIn,c=Object(n.useState)({password:"",email:""}),i=Object(q.a)(c,2),l=i[0],o=i[1],u=l.password,m=l.email,s=Object(n.useRef)(),b=Object(n.useState)({}),E=Object(q.a)(b,2),p=E[0],j=p.password,O=p.email,g=E[1],h=Object(n.useState)(),w=Object(q.a)(h,2),y=w[0],x=w[1];Object(n.useEffect)((function(){(null===s||void 0===s?void 0:s.current)&&s.current.focus()}),[s]);var C=function(){var e;return u||(e=!0,g((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:{label:"Required",error:!0}})}))),ie(m)||(e=!0,g((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(jt,null,t?r.a.createElement(R.a,{to:"".concat("/ruvod-test","/")}):null,r.a.createElement(W.a,null,r.a.createElement(T.a,{p:2},r.a.createElement(pt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(Ot,{variant:"h6"},"Login"),r.a.createElement(mt,{type:"login",setAuthControls:x}),y?null===y||void 0===y?void 0:y.element:r.a.createElement(pt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(pt,{container:!0,spacing:2,direction:"column"},r.a.createElement(gt,{required:!0,variant:"outlined",type:"email",size:"small",value:m,onChange:function(e){var t=e.target.value;o(Object(d.a)(Object(d.a)({},l),{},{email:t})),g((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:null})}))},inputRef:s,error:null===O||void 0===O?void 0:O.error,label:(null===O||void 0===O?void 0:O.label)||"Email"}),r.a.createElement(gt,{required:!0,type:"password",variant:"outlined",size:"small",value:u,onChange:function(e){var t=e.target.value;o(Object(d.a)(Object(d.a)({},l),{},{password:t})),g((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:null})}))},error:null===j||void 0===j?void 0:j.error,label:(null===j||void 0===j?void 0:j.label)||"Password"})),r.a.createElement(pt,{container:!0,justify:"space-between"},r.a.createElement(ht,{to:"".concat("/ruvod-test","/registration")},r.a.createElement(Le.a,{variant:"outlined",href:"registration"},"Registration")),r.a.createElement(Le.a,{variant:"contained",color:"primary",onClick:Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C()){e.next=9;break}return e.prev=1,e.next=4,a({email:m,password:u});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),g({password:{error:!0},email:{error:!0}});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))},"Login")))))))})),yt=(a(166),Object(z.a)("div")({display:"flex",flex:"1",justifyContent:"center",alignItems:"center"})),xt=Object(I.b)((function(e){var t=e.auth;return{loading:(void 0===t?{}:t).loading}}),(function(e){return{initAuth:function(){return e(function(){var e=Object(v.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(j(!0)),e.next=4,p.a.get("".concat(u,"/auth"),{withCredentials:!0});case 4:a=e.sent,n=a.data,t(g(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(O(!0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.loading,a=e.initAuth;return Object(n.useEffect)((function(){a()}),[]),r.a.createElement(r.a.Fragment,null,t?r.a.createElement(yt,null,r.a.createElement(A.a,null)):r.a.createElement("div",{className:"App"},r.a.createElement(S.a,null,r.a.createElement(Qe,null),r.a.createElement(R.d,null,r.a.createElement(R.b,{exact:!0,path:"".concat("/ruvod-test","/")},r.a.createElement(Fe,null)),r.a.createElement(R.b,{path:"".concat("/ruvod-test","/registration")},r.a.createElement(Et,null)),r.a.createElement(R.b,{path:"".concat("/ruvod-test","/login")},r.a.createElement(wt,null))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ct=new o.a({uri:"".concat(u,"/graphql"),credentials:"include"});i.a.render(r.a.createElement(l.a,{client:Ct},r.a.createElement(I.a,{store:k},r.a.createElement(xt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[136,1,2]]]);
//# sourceMappingURL=main.b146bc24.chunk.js.map