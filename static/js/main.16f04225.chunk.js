(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{137:function(e,t,a){e.exports=a(168)},142:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),i=a.n(c),l=a(25),o=a(53),u="https://ruvodtest.herokuapp.com",m=(a(142),a(41)),s=a(19),d=a(11),b=a.n(d),f=a(18),v=a(56),E=a(57),p=a(52),j=a.n(p),O=a(35),h=new(function(){function e(t){var a=this,n=t.endpoint;Object(v.a)(this,e),this.client=void 0,this.loading=!1,this.error=!1,Object(O.d)(this),this.API_ENDPOINT=n,Object(O.e)((function(){return{}}),Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.auth();case 1:case"end":return e.stop()}}),e)}))),{fireImmediately:!0})}return Object(E.a)(e,[{key:"commitLoading",value:function(e){this.loading=e,this.error=!1}},{key:"commitError",value:function(e){this.error=e,this.loading=!1}},{key:"auth",value:function(){var e=Object(f.a)(b.a.mark((function e(){var t,a,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.commitLoading(!0),e.prev=1,e.next=4,j.a.get("".concat(this.API_ENDPOINT,"/auth"),{withCredentials:!0});case 4:t=e.sent,a=t.data,Object(O.f)((function(){n.client=a,n.loading=!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.commitError(!0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"logIn",value:function(){var e=Object(f.a)(b.a.mark((function e(t){var a,n,r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.abrupt("return",j.a.post("".concat(this.API_ENDPOINT,"/auth"),{email:a,password:n},{withCredentials:!0}).then(Object(O.b)("fetchSuccess",(function(e){var t=e.data;r.client=t.client}))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"registration",value:function(){var e=Object(f.a)(b.a.mark((function e(t){var a,n,r,c=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,r=t.name,e.abrupt("return",j.a.post("".concat(this.API_ENDPOINT,"/createClient"),{email:a,password:n,name:r},{withCredentials:!0}).then(Object(O.b)("fetchSuccess",(function(e){var t=e.data;c.client=t.client}))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"webAuthn",value:function(){var e=Object(f.a)(b.a.mark((function e(){var t,a,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(this.API_ENDPOINT,"/auth/webauthn"),{withCredentials:!0});case 2:t=e.sent,a=t.data.client,Object(O.f)((function(){n.client=a}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"forgetClient",value:function(){this.client=void 0}}]),e}())({endpoint:u}),g=a(170),w=a(218),y=a(14),x=a(62),k=a(110),C=a(220),I=a(214),S=a(6),z=a(32),q=a(172),R=a(208),A=a(204),P=a(79),N=a.n(P),U=a(78),$=a.n(U),F=a(207),T=a(115),W=a.n(T),D=a(114),L=a.n(D),_=a(206),H=Object(k.a)("div")({display:"flex",marginLeft:"46px",marginTop:"8px"}),B=function(e){var t=e.name,a=e.email,c=e.deleteItem,i=e.showCard,l=e.showMoreInfo,o=e.setStore;return Object(n.useEffect)((function(){setTimeout((function(){return o({showCard:!0})}),100)}),[]),r.a.createElement(A.a,{in:i},r.a.createElement(q.a,null,r.a.createElement(C.a,{p:2},r.a.createElement(_.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,alignItems:"center",direction:"row"},r.a.createElement(C.a,{mr:2},r.a.createElement(F.a,{size:"small",onClick:function(){return o({showMoreInfo:!l})}},l?r.a.createElement($.a,null):r.a.createElement(N.a,null))),r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(_.a,{item:!0},"Name:"),r.a.createElement(_.a,{item:!0},t))))),r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,direction:"row",spacing:2},r.a.createElement(_.a,{item:!0},r.a.createElement(F.a,{size:"small",onClick:function(){o({edit:!0})}},r.a.createElement(L.a,{fontSize:"small"}))),r.a.createElement(_.a,{item:!0},r.a.createElement(F.a,{size:"small",onClick:function(){o({showCard:!1}),c()}},r.a.createElement(W.a,{fontSize:"small"})))))),r.a.createElement(R.a,{in:l},r.a.createElement(H,null,r.a.createElement(_.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(_.a,{item:!0},"User email:"),r.a.createElement(_.a,{item:!0},a)))))))},M=a(40),Q=a(219),J=a(81),Z=a.n(J),G=a(68),Y=a.n(G),K=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,V=function(e){return K.test(e)},X=Object(k.a)("div")({display:"flex",marginLeft:"46px",marginTop:"10px"}),ee=Object(k.a)(Q.a)((function(e){var t=e.theme,a=e.smallScreenWidth;return Object(M.a)({},t.breakpoints.down("xs"),{width:a})})),te=function(e){var t=e.name,a=e.email,c=e.showMoreInfo,i=e.showCard,l=e.setStore,o=e.updateItem,u=Object(n.useState)(t),m=Object(y.a)(u,2),s=m[0],d=m[1],b=Object(n.useState)(a),f=Object(y.a)(b,2),v=f[0],E=f[1],p=Object(n.useState)({}),j=Object(y.a)(p,2),O=j[0],h=O.name,g=O.email,w=j[1];return r.a.createElement(A.a,{in:i},r.a.createElement(q.a,null,r.a.createElement(C.a,{p:2},r.a.createElement(_.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,alignItems:"center"},r.a.createElement(C.a,{mr:2},r.a.createElement(F.a,{size:"small",onClick:function(){return l({showMoreInfo:!c})}},c?r.a.createElement($.a,null):r.a.createElement(N.a,null))),r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(_.a,{item:!0},"Name:"),r.a.createElement(_.a,{item:!0},r.a.createElement(ee,{smallScreenWidth:"90px",value:s,onChange:function(e){var t=e.target.value;d(t),w((function(e){return Object(S.a)(Object(S.a)({},e),{},{name:null})}))},error:null===h||void 0===h?void 0:h.error})))))),r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,direction:"row",spacing:2},r.a.createElement(_.a,{item:!0},r.a.createElement(F.a,{size:"small",onClick:function(){l({edit:!1})}},r.a.createElement(Y.a,{fontSize:"small"}))),r.a.createElement(_.a,{item:!0},r.a.createElement(F.a,{size:"small",onClick:function(){(function(){var e;return s||(e=!0,w((function(e){return Object(S.a)(Object(S.a)({},e),{},{name:{label:"Required",error:!0}})}))),V(v)||(e=!0,w((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e})()&&(l({name:s,email:v,edit:!1}),o({name:s,email:v}))}},r.a.createElement(Z.a,{fontSize:"small"})))))),r.a.createElement(R.a,{in:c},r.a.createElement(X,null,r.a.createElement(_.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(_.a,{item:!0},"User email:"),r.a.createElement(_.a,{item:!0},r.a.createElement(ee,{smallScreenWidth:"140px",value:v,onChange:function(e){var t=e.target.value;E(t),w((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:null})}))},error:null===g||void 0===g?void 0:g.error}))))))))},ae=function(e){var t=e.deleteItem,a=e.updateItem,c=Object(z.a)(e,["deleteItem","updateItem"]),i=Object(n.useState)(Object(S.a)({},c)),l=Object(y.a)(i,2),o=l[0],u=l[1],m=o.edit,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(Object(S.a)(Object(S.a)({},o),e))};return r.a.createElement(r.a.Fragment,null,m?r.a.createElement(te,Object.assign({},o,{setStore:s,updateItem:a})):r.a.createElement(B,Object.assign({},o,{setStore:s,deleteItem:t})))},ne=a(211),re=function(e){var t=e.opacity,a=void 0===t?1:t;return r.a.createElement(q.a,{style:{opacity:a}},r.a.createElement(C.a,{p:2},r.a.createElement(_.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,alignItems:"center",direction:"row"},r.a.createElement(C.a,{mr:4}),r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(_.a,{item:!0},r.a.createElement(ne.a,{variant:"text",height:30,width:45})),r.a.createElement(_.a,{item:!0},r.a.createElement(ne.a,{variant:"text",height:30,width:145})))))),r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,direction:"row",spacing:2},r.a.createElement(_.a,{item:!0},r.a.createElement(ne.a,{variant:"text",height:30,width:18})),r.a.createElement(_.a,{item:!0},r.a.createElement(ne.a,{variant:"text",height:30,width:18})))))))},ce=a(212),ie=function(e){var t=e.loading,a=e.users,n=void 0===a?[]:a,c=e.deleteItem,i=e.updateItem;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(_.a,{container:!0,spacing:3},Array(6).fill(null).map((function(e,t){return r.a.createElement(_.a,{item:!0,xs:12,key:t},r.a.createElement(re,{opacity:1-1.5*t/10}))}))):r.a.createElement(r.a.Fragment,null,n.length?r.a.createElement(_.a,{container:!0,spacing:3},n.map((function(e){return r.a.createElement(_.a,{item:!0,xs:12,key:e.id},r.a.createElement(ae,Object.assign({},e,{deleteItem:function(){return c(e.id)},updateItem:function(t){return i(e.id,t)}})))}))):r.a.createElement(ce.a,null,"Users list is empty")))},le=a(120),oe=a.n(le),ue=a(213),me=a(70);function se(){var e=Object(me.a)(["\n  mutation updateUser($id: ID!, $user: UpdateUserInput!) {\n    updateUser(id: $id, input: $user) {\n      id\n      email\n      name\n    }\n  }\n"]);return se=function(){return e},e}function de(){var e=Object(me.a)(["\n  mutation deleteUser($id: ID!) {\n    deleteUser(id: $id) {\n      id\n      email\n      name\n    }\n  }\n"]);return de=function(){return e},e}function be(){var e=Object(me.a)(["\n  query getUsers($skip: Int, $limit: Int) {\n    users(skip: $skip, limit: $limit) {\n      id\n      email\n      name\n    }\n  }\n"]);return be=function(){return e},e}function fe(){var e=Object(me.a)(["\n  mutation createUser($user: CreateUserInput!) {\n    createUser(input: $user) {\n      id\n      email\n      name\n    }\n  }\n"]);return fe=function(){return e},e}var ve=Object(o.b)(fe()),Ee={limit:100},pe=Object(o.b)(be()),je=Object(o.b)(de()),Oe=Object(o.b)(se()),he=Object(k.a)("div")({display:"flex",marginLeft:"16px",marginTop:"10px"}),ge=Object(k.a)("div")({position:"fixed",bottom:"15vh",right:"20vw"}),we=Object(k.a)(Q.a)((function(e){var t=e.theme,a=e.smallScreenWidth;return Object(M.a)({},t.breakpoints.down("xs"),{width:a})})),ye={name:"",email:""},xe=function(e){var t=e.defaultShow,a=Object(n.useState)(t),c=Object(y.a)(a,2),i=c[0],l=c[1],o=Object(n.useState)(ye),u=Object(y.a)(o,2),m=u[0],s=u[1],d=m.name,b=m.email,f=Object(x.a)(ve,{update:function(e,t){var a=t.data.createUser,n=e.readQuery({query:pe,variables:Ee}).users;e.writeQuery({query:pe,data:{users:n.concat(a)},variables:Ee})}}),v=Object(y.a)(f,1)[0],E=Object(n.useRef)(),p=Object(n.useState)({}),j=Object(y.a)(p,2),O=j[0],h=O.name,g=O.email,w=j[1];Object(n.useEffect)((function(){i&&(null===E||void 0===E?void 0:E.current)&&E.current.focus()}),[i]);var k=function(e){l(e),e||(s(ye),w({}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,null,r.a.createElement(ue.a,{color:"primary",onClick:function(){return k(!i)}},i?r.a.createElement(Y.a,null):r.a.createElement(oe.a,null))),r.a.createElement(A.a,{in:i},r.a.createElement(q.a,null,r.a.createElement(C.a,{p:2},r.a.createElement(_.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,alignItems:"center"},r.a.createElement(C.a,{mr:2}),r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(_.a,{item:!0},"Name:"),r.a.createElement(_.a,{item:!0},r.a.createElement(we,{smallScreenWidth:"100px",required:!0,value:d,onChange:function(e){var t=e.target.value;s(Object(S.a)(Object(S.a)({},m),{},{name:t})),w((function(e){return Object(S.a)(Object(S.a)({},e),{},{name:null})}))},inputRef:E,error:null===h||void 0===h?void 0:h.error})))))),r.a.createElement(_.a,{item:!0},r.a.createElement(_.a,{container:!0,direction:"row",spacing:2},r.a.createElement(_.a,{item:!0},r.a.createElement(F.a,{size:"small",onClick:function(){k(!1)}},r.a.createElement(Y.a,{fontSize:"small"}))),r.a.createElement(_.a,{item:!0},r.a.createElement(F.a,{size:"small",onClick:function(){(function(){var e;return d||(e=!0,w((function(e){return Object(S.a)(Object(S.a)({},e),{},{name:{label:"Required",error:!0}})}))),V(b)||(e=!0,w((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e})()&&(k(!1),v({variables:{user:{name:d,email:b}}}))}},r.a.createElement(Z.a,{fontSize:"small"})))))),r.a.createElement(he,null,r.a.createElement(_.a,{container:!0,direction:"row",alignItems:"center",spacing:1},r.a.createElement(_.a,{item:!0},"User email:"),r.a.createElement(_.a,{item:!0},r.a.createElement(we,{smallScreenWidth:"150px",required:!0,value:b,onChange:function(e){var t=e.target.value;s(Object(S.a)(Object(S.a)({},m),{},{email:t})),w((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:null})}))},error:null===g||void 0===g?void 0:g.error}))))))))},ke=a(221),Ce=Object(k.a)(C.a)({overflowY:"scroll",display:"flex",flex:"1"}),Ie=Object(ke.a)((function(){var e=Object(x.b)(pe,{variables:Ee}),t=e.loading,a=e.data,c=e.refetch,i=Object(x.a)(je,{update:function(e,t){var a=t.data.deleteUser,n=e.readQuery({query:pe,variables:Ee}).users;e.writeQuery({query:pe,data:{users:n.filter((function(e){return e.id!==(null===a||void 0===a?void 0:a.id)}))},variables:Ee})}}),l=Object(y.a)(i,1)[0],o=Object(x.a)(Oe),u=Object(y.a)(o,1)[0],m=h.client;return Object(n.useEffect)((function(){(null===m||void 0===m?void 0:m._id)&&c({variables:Ee})}),[null===m||void 0===m?void 0:m._id]),r.a.createElement(Ce,{pt:2,mb:2},m?null:r.a.createElement(s.a,{to:"".concat("/ruvod-test","/login")}),r.a.createElement(I.a,{maxWidth:"sm"},r.a.createElement(ie,{users:null===a||void 0===a?void 0:a.users,loading:t,deleteItem:function(e){return l({variables:{id:e}})},updateItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u({variables:{id:e,user:t}})}}),r.a.createElement(C.a,{mt:3},r.a.createElement(xe,null))))})),Se=a(216),ze=a(217),qe=a(215),Re=a(122),Ae=a.n(Re),Pe=a(121),Ne=a.n(Pe),Ue=a(84),$e=new Ue.a({pathPrefix:"".concat(u,"/webauthn")}),Fe=Object(k.a)(F.a)({color:"#FFF"}),Te=Object(k.a)(qe.a)({color:"#FFF",minHeight:"64px",textTransform:"none",borderRadius:0,fontSize:"16px"}),We=Object(k.a)(_.a)({minHeight:"64px"}),De=Object(ke.a)((function(){var e=h.client,t=h.error;return r.a.createElement(r.a.Fragment,null,t||!e?r.a.createElement(s.a,{to:"".concat("/ruvod-test","/login")}):null,r.a.createElement("div",{style:{height:"64px"}}),r.a.createElement(Se.a,{position:"fixed"},r.a.createElement(ze.a,{disableGutters:!0},r.a.createElement(I.a,{maxWidth:"md"},r.a.createElement(We,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(_.a,{item:!0},r.a.createElement(m.b,{to:"".concat("/ruvod-test","/")},r.a.createElement(Te,null,"Home"))),r.a.createElement(_.a,{item:!0},e?r.a.createElement(_.a,{container:!0,alignItems:"center",spacing:2},r.a.createElement(_.a,{item:!0},r.a.createElement("div",null,(null===e||void 0===e?void 0:e.name)?"Hi, ".concat(e.name):"Hi, user")),r.a.createElement(_.a,{item:!0},r.a.createElement(Fe,{onClick:Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([j.a.get("".concat(u,"/logout"),{withCredentials:!0}),$e.logout()]);case 2:h.forgetClient();case 3:case"end":return e.stop()}}),e)})))},r.a.createElement(Ne.a,null)))):r.a.createElement(m.b,{to:"".concat("/ruvod-test","/login")},r.a.createElement(Fe,null,r.a.createElement(Ae.a,null)))))))))})),Le=a(123),_e=a.n(Le),He=Object(k.a)(F.a)((function(e){var t=e.theme;return{color:e.active?t.palette.primary.main:"#000"}})),Be=function(e){var t=e.children,a=Object(z.a)(e,["children"]);return r.a.createElement(_.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(_.a,{item:!0,key:t},e)})))},Me=function(e){var t=e.active,a=e.setAuthControls,c=e.onClick;return Object(n.useEffect)((function(){return t&&a&&a({element:r.a.createElement(Be,{container:!0,spacing:2,direction:"column"},r.a.createElement(ce.a,null,"Follow the open window"),r.a.createElement(Be,{container:!0,spacing:2,direction:"column"},r.a.createElement(qe.a,{variant:"outlined",onClick:function(){return c&&c()}},"Cancel")))}),function(){return a&&a(null)}}),[t]),r.a.createElement("a",{href:"".concat(u,"/auth/github/login")},r.a.createElement(He,{active:t,onClick:function(e){t&&e.stopPropagation(),c&&c()}},r.a.createElement(_e.a,null)))},Qe=a(125),Je=a.n(Qe),Ze=a(222),Ge=new Ue.a({pathPrefix:"".concat(u,"/webauthn")}),Ye=Object(k.a)(F.a)((function(e){var t=e.theme;return{color:e.active?t.palette.primary.main:"#000"}})),Ke=Object(k.a)(Q.a)({width:"100%"}),Ve=function(e){var t=e.children,a=Object(z.a)(e,["children"]);return r.a.createElement(_.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(_.a,{item:!0,key:t},e)})))},Xe=Object(ke.a)((function(e){var t=e.onCancel,a=Object(n.useState)({email:""}),c=Object(y.a)(a,2),i=c[0],l=c[1],o=i.email,u=Object(n.useRef)(),m=Object(n.useState)({}),s=Object(y.a)(m,2),d=s[0].email,v=s[1];Object(n.useEffect)((function(){(null===u||void 0===u?void 0:u.current)&&u.current.focus()}),[u]);var E=function(){var e;return V(o)||(e=!0,v((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(Ve,{container:!0,spacing:2,direction:"column"},r.a.createElement(Ve,{container:!0,spacing:2,direction:"column"},r.a.createElement(Ke,{required:!0,variant:"outlined",type:"email",size:"small",value:o,onChange:function(e){var t=e.target.value;l(Object(S.a)(Object(S.a)({},i),{},{email:t})),v((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:null})}))},inputRef:u,error:null===d||void 0===d?void 0:d.error,label:(null===d||void 0===d?void 0:d.label)||"Email"})),r.a.createElement(Ve,{container:!0,justify:"space-between"},r.a.createElement(qe.a,{variant:"outlined",onClick:t},"Cancel"),r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E()){e.next=10;break}return e.prev=1,e.next=4,Ge.login({username:o});case 4:h.webAuthn(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert("login failed ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))},"Login")))})),et=Object(ke.a)((function(e){var t=e.onCancel,a=Object(n.useState)({name:"",email:""}),c=Object(y.a)(a,2),i=c[0],l=c[1],o=i.name,u=i.email,m=Object(n.useRef)(),s=Object(n.useState)({}),d=Object(y.a)(s,2),v=d[0],E=v.email,p=v.name,j=d[1];Object(n.useEffect)((function(){(null===m||void 0===m?void 0:m.current)&&m.current.focus()}),[m]);var O=function(){var e;return o||(e=!0,j((function(e){return Object(S.a)(Object(S.a)({},e),{},{name:{label:"Required",error:!0}})}))),V(u)||(e=!0,j((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(Ve,{container:!0,spacing:2,direction:"column"},r.a.createElement(Ve,{container:!0,spacing:2,direction:"column"},r.a.createElement(Ke,{required:!0,variant:"outlined",type:"name",size:"small",value:o,onChange:function(e){var t=e.target.value;l(Object(S.a)(Object(S.a)({},i),{},{name:t})),j((function(e){return Object(S.a)(Object(S.a)({},e),{},{name:null})}))},inputRef:m,error:null===p||void 0===p?void 0:p.error,label:(null===p||void 0===p?void 0:p.label)||"Name"}),r.a.createElement(Ke,{required:!0,variant:"outlined",type:"email",size:"small",value:u,onChange:function(e){var t=e.target.value;l(Object(S.a)(Object(S.a)({},i),{},{email:t})),j((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:null})}))},error:null===E||void 0===E?void 0:E.error,label:(null===E||void 0===E?void 0:E.label)||"Email"})),r.a.createElement(Ve,{container:!0,justify:"space-between"},r.a.createElement(qe.a,{variant:"outlined",onClick:t},"Cancel"),r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O()){e.next=10;break}return e.prev=1,e.next=4,Ge.register({username:u,name:o});case 4:h.webAuthn(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert("register failed ".concat(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))},"Registration")))})),tt=function(e){var t=e.setAuthControls,a=e.active,c=e.onClick,i=e.type;return Object(n.useEffect)((function(){if(a){var e;switch(i){case"login":e={element:r.a.createElement(Xe,{onCancel:function(){return c&&c()}})};break;case"registration":e={element:r.a.createElement(et,{onCancel:function(){return c&&c()}})}}t&&t(e||null)}return function(){return t&&t(null)}}),[a,i]),r.a.createElement(Ze.a,{title:r.a.createElement(ce.a,null,"WebAuthn")},r.a.createElement(Ye,{active:a,onClick:function(){c&&c()}},r.a.createElement(Je.a,null)))},at=function(e){var t=e.children,a=e.itemProps,n=void 0===a?{}:a,c=e.value,i=e.onSelect,l=Object(z.a)(e,["children","itemProps","value","onSelect"]);return r.a.createElement(_.a,l,t.map((function(e,t){return r.a.createElement(_.a,{item:!0,key:t},r.a.cloneElement(e,Object(S.a)({active:t===c,onClick:function(){return i(t)}},n)))})))},nt=function(e){var t=e.type,a=e.setAuthControls,c=Object(n.useState)(),i=Object(y.a)(c,2),l=i[0],o=i[1];return r.a.createElement(at,{container:!0,justify:"center",spacing:1,onSelect:function(e){return o(e===l?null:e)},value:l,itemProps:{type:t,setAuthControls:a}},r.a.createElement(Me,null),r.a.createElement(tt,null))},rt=function(e){var t=e.children,a=Object(z.a)(e,["children"]);return r.a.createElement(_.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(_.a,{item:!0,key:t},e)})))},ct=Object(k.a)(I.a)((function(e){var t=e.theme;return Object(M.a)({marginTop:t.spacing(2),width:"350px"},t.breakpoints.down("xs"),{width:"320px"})})),it=Object(k.a)(ce.a)((function(e){return{marginBottom:e.theme.spacing(6)}})),lt=Object(k.a)(Q.a)({width:"100%"}),ot=Object(k.a)(m.b)({textDecoration:"none"}),ut=Object(ke.a)((function(){var e=Object(n.useState)({name:"",email:"",password:""}),t=Object(y.a)(e,2),a=t[0],c=t[1],i=a.name,l=a.email,o=a.password,u=Object(n.useRef)(),m=Object(n.useState)({}),d=Object(y.a)(m,2),v=d[0],E=v.name,p=v.email,j=v.password,O=d[1],g=Object(n.useState)(),w=Object(y.a)(g,2),x=w[0],k=w[1],I=h.client;Object(n.useEffect)((function(){(null===u||void 0===u?void 0:u.current)&&u.current.focus()}),[u]);var z=function(){var e;return i||(e=!0,O((function(e){return Object(S.a)(Object(S.a)({},e),{},{name:{label:"Required",error:!0}})}))),o||(e=!0,O((function(e){return Object(S.a)(Object(S.a)({},e),{},{password:{label:"Required",error:!0}})}))),V(l)||(e=!0,O((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(ct,null,I?r.a.createElement(s.a,{to:"".concat("/ruvod-test","/")}):null,r.a.createElement(q.a,null,r.a.createElement(C.a,{p:2},r.a.createElement(rt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(it,{variant:"h6"},"Registration"),r.a.createElement(nt,{type:"registration",setAuthControls:k}),x?null===x||void 0===x?void 0:x.element:r.a.createElement(rt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(rt,{container:!0,spacing:2,direction:"column"},r.a.createElement(lt,{required:!0,variant:"outlined",size:"small",value:i,onChange:function(e){var t=e.target.value;c(Object(S.a)(Object(S.a)({},a),{},{name:t})),O((function(e){return Object(S.a)(Object(S.a)({},e),{},{name:null})}))},inputRef:u,error:null===E||void 0===E?void 0:E.error,label:(null===E||void 0===E?void 0:E.label)||"Name"}),r.a.createElement(lt,{required:!0,variant:"outlined",type:"email",size:"small",value:l,onChange:function(e){var t=e.target.value;c(Object(S.a)(Object(S.a)({},a),{},{email:t})),O((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:null})}))},error:null===p||void 0===p?void 0:p.error,label:(null===p||void 0===p?void 0:p.label)||"Email"}),r.a.createElement(lt,{required:!0,variant:"outlined",type:"password",size:"small",value:o,onChange:function(e){var t=e.target.value;c(Object(S.a)(Object(S.a)({},a),{},{password:t})),O((function(e){return Object(S.a)(Object(S.a)({},e),{},{password:null})}))},error:null===j||void 0===j?void 0:j.error,label:(null===j||void 0===j?void 0:j.label)||"Password"})),r.a.createElement(rt,{container:!0,justify:"space-between"},r.a.createElement(ot,{to:"".concat("/ruvod-test","/login")},r.a.createElement(qe.a,{variant:"outlined"},"Login")),r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z()){e.next=9;break}return e.prev=1,e.next=4,h.registration({email:l,password:o,name:i});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),O({password:{error:!0},email:{error:!0},name:{error:!0}});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))},"Registration")))))))})),mt=function(e){var t=e.children,a=Object(z.a)(e,["children"]);return r.a.createElement(_.a,a,r.a.Children.map(t,(function(e,t){return r.a.createElement(_.a,{item:!0,key:t},e)})))},st=Object(k.a)(I.a)((function(e){var t=e.theme;return Object(M.a)({marginTop:t.spacing(2),width:"350px"},t.breakpoints.down("xs"),{width:"320px"})})),dt=Object(k.a)(ce.a)((function(e){return{marginBottom:e.theme.spacing(6)}})),bt=Object(k.a)(Q.a)({width:"100%"}),ft=Object(k.a)(m.b)({textDecoration:"none"}),vt=Object(ke.a)((function(){var e=Object(n.useState)({password:"",email:""}),t=Object(y.a)(e,2),a=t[0],c=t[1],i=a.password,l=a.email,o=Object(n.useRef)(),u=Object(n.useState)({}),m=Object(y.a)(u,2),d=m[0],v=d.password,E=d.email,p=m[1],j=Object(n.useState)(),O=Object(y.a)(j,2),g=O[0],w=O[1],x=h.client;Object(n.useEffect)((function(){(null===o||void 0===o?void 0:o.current)&&o.current.focus()}),[o]);var k=function(){var e;return i||(e=!0,p((function(e){return Object(S.a)(Object(S.a)({},e),{},{password:{label:"Required",error:!0}})}))),V(l)||(e=!0,p((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:{label:"Is not a valid email",error:!0}})}))),!e};return r.a.createElement(st,null,x?r.a.createElement(s.a,{to:"".concat("/ruvod-test","/")}):null,r.a.createElement(q.a,null,r.a.createElement(C.a,{p:2},r.a.createElement(mt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(dt,{variant:"h6"},"Login"),r.a.createElement(nt,{type:"login",setAuthControls:w}),g?null===g||void 0===g?void 0:g.element:r.a.createElement(mt,{container:!0,justify:"center",spacing:2,direction:"column"},r.a.createElement(mt,{container:!0,spacing:2,direction:"column"},r.a.createElement(bt,{required:!0,variant:"outlined",type:"email",size:"small",value:l,onChange:function(e){var t=e.target.value;c(Object(S.a)(Object(S.a)({},a),{},{email:t})),p((function(e){return Object(S.a)(Object(S.a)({},e),{},{email:null})}))},inputRef:o,error:null===E||void 0===E?void 0:E.error,label:(null===E||void 0===E?void 0:E.label)||"Email"}),r.a.createElement(bt,{required:!0,type:"password",variant:"outlined",size:"small",value:i,onChange:function(e){var t=e.target.value;c(Object(S.a)(Object(S.a)({},a),{},{password:t})),p((function(e){return Object(S.a)(Object(S.a)({},e),{},{password:null})}))},error:null===v||void 0===v?void 0:v.error,label:(null===v||void 0===v?void 0:v.label)||"Password"})),r.a.createElement(mt,{container:!0,justify:"space-between"},r.a.createElement(ft,{to:"".concat("/ruvod-test","/registration")},r.a.createElement(qe.a,{variant:"outlined",href:"registration"},"Registration")),r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k()){e.next=9;break}return e.prev=1,e.next=4,h.logIn({email:l,password:i});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),p({password:{error:!0},email:{error:!0}});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))},"Login")))))))})),Et=(a(167),Object(g.a)("div")({display:"flex",flex:"1",justifyContent:"center",alignItems:"center"})),pt=Object(ke.a)((function(){return r.a.createElement(r.a.Fragment,null,h.loading?r.a.createElement(Et,null,r.a.createElement(w.a,null)):r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(De,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"".concat("/ruvod-test","/")},r.a.createElement(Ie,null)),r.a.createElement(s.b,{path:"".concat("/ruvod-test","/registration")},r.a.createElement(ut,null)),r.a.createElement(s.b,{path:"".concat("/ruvod-test","/login")},r.a.createElement(vt,null))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var jt=new o.a({uri:"".concat(u,"/graphql"),credentials:"include"});i.a.render(r.a.createElement(l.a,{client:jt},r.a.createElement(pt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[137,1,2]]]);
//# sourceMappingURL=main.16f04225.chunk.js.map